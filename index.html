<!DOCTYPE html><html>

<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<title>LUCKY SPIN</title>
	<meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
    <meta name="description" content="asfkasjfasklfas">

    <link rel="stylesheet" href="public/main/css/bootstrap.css">
	<link rel="stylesheet" href="public/main/css/C0ZQJyIsETSp.css">
	<link rel="stylesheet" type="text/css" href="public/main/css/style_5.css">

	<script src="public/main/js/akrijVHqSezO.js"></script>
    <script src="public/main/js/Mopviz8qZA7L.js"></script>

    <script type="text/javascript" src="public/main/js/cgc5FZTlKIMz.js"></script>
    <script src="public/main/js/pJmXAZ9oHmFn.js"></script>
    <script src="public/main/js/7dVeiyDoPwoP.js"></script>
	<script src="public/main/js/spin.js"></script>
</head>
<body style="background-image: url(upload/wall-2.jpg); background-position: center; background-size: cover; background-repeat: no-repeat; background-color: black; min-height: 60em;">

	<canvas id="my-canvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none;"></canvas>
	<section class="container">	
		<div id="popup-container-ads" class="popup-container">
            <div id="popup-body" class="popup-body popup-container-ads" style="width: 300px; height: 72px;">
                <div class="popup-close" onclick="close_popup_start()"><center><b>x</b></center></div>
                <h6 style="text-align: center; padding: 17px;">SELAMAT DATANG DI <br> LUCKY SPIN</h6>
            </div>
        </div>		

        <div id="popup-container-win" class="popup-container" style="display: none;">
            <div id="popup-body" class="popup-body" style="height: 563px; background: none;">
                <div class="popup-close" onclick="visitPage()"><center><b>x</b></center></div>
                <div id="popup-header" class="popup-header" style="background: none;">
                    <center><h5 id="title-popup-win" style="padding: 10px;"><b>Selamat Anda Mendapatkan</b></h5></center>
                </div>
                
                <div style="height: 91.5%;width: 100%; padding: 20px 0px;">
                    <table style="width: 100%;">
                    	<tbody><tr>
	                    	<td align="center" style="padding: 20px 0px;">
	                    		<img id="item-image">
	                    	</td>
	                    </tr>
	                    <tr>
	                    	<td align="center" style="color: #f8df03;">
	                    		<h3 id="item-value">IDR 18.000,00</h3>
	                    	</td>
	                    </tr>
	                    <tr>
	                    	<td align="center" style="padding: 15px 30px; color: #f8df03;">
	                    		<h6 id="item-description" style="color: white; margin-bottom: 10px;">Selamat anda mendapatkan hadiah <b><span id="item-name"></span> - <span id="item-prize"></span></b>. Silahkan anda Screenshot sebagai bukti kemenangan anda!</h6>

	                    		<h6 style="margin: 0;">USERNAME : <span id="voucher-username">jojo_cornor</span></h6>
	                    		<h6 style="margin: 0;">KODE TIKET : <span id="voucher-code">101010</span></h6>
	                    	</td>
	                    </tr>
	                    <tr>
	                    	<td align="center" style="padding: 10px 0px;">
																	<a class="claimed" href="https://wa.me/628xxxx" onclick="visitPage()" target="_blank"><b>KLAIM SEKARANG</b></a>
									                    	</td>
	                    </tr>
                    </tbody></table>
                </div>
            </div>
        </div>

        <div id="popup-container-history" class="popup-container" style="display: none;">
            <div id="popup-body" class="popup-body" style="height: 563px;">
                <div class="popup-close" onclick="close_popup_history()"><center><b>x</b></center></div>
                <div id="popup-header" class="popup-header">
                    <center><h6 id="title-popup-win" style="padding: 10px;"><b>60 Daftar Riwayat Spin Terakhir</b></h6></center>
                </div>
                
                <div style="overflow-y: scroll;height: 91.5%;width: 100%;">
                    <div style="padding: 5px;">
                    	<table style="width: 100%;">
                    		<thead>
                    			<tr>
                    				<th align="center" valign="center" style="width: 10%; text-align: center;">NO</th>
		                    		<th align="center" valign="center" style="width: 50%;">USERNAME</th>
		                    		<th align="center" valign="center" style="width: 40%; text-align: center;">WINNER</th>
		                    	</tr>
                    		</thead>
	                    	<tbody id="history-container">
	                    		<tr>
	                    			<td style="width: 10%; padding: 5px; text-align: center;">1</td>
		                    		<td style="width: 50%; padding: 5px;">Username</td>
		                    		<td style="width: 40%; padding: 5px; text-align: center;">IDR 18.000,00</td>
		                    	</tr>
	                    	</tbody>
	                    </table>
                    </div>
                </div>
            </div>
        </div>
	</section>

	<script src="public/main/js/dZVbifHRnC9n.js" crossorigin="anonymous"></script>
	<script src="public/main/js/h3mxO1NuPTjZ.js" crossorigin="anonymous"></script>
	<script type="text/javascript" src="public/main/js/2dMLd1GLhKhg.js"></script>

    <script>
    	var data_winner = null, theWheel, claim_message = 'Halo bossku, saya dengan ID *{{username}}* ingin klaim hadiah *{{item_name}} {{item_value}}* bossku';
    	let audio = new Audio ('public/main/audio/spin.mp3');
    	audio.volume = 0.2
	    audio.loop = true;

    	if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
		 var v_mobile = '<table style="margin-left: 0px;">'+
							'<tr>'+
								'<td align="center" valign="center">'+
									'<img class="logo-mobile" src="https://ypol.ngedemo.site/upload/luckwheel.png" style="margin-bottom: 0;">'+
								'</td>'+
							'</tr>'+
							'<tr>'+
								'<td align="center" valign="center">'+
									'<div class="container_spinner_mobile" style="">'+
									  	'<canvas class="inner" id="canvas" width="620" height="620">'+
									        '<p style="color: white" align="center">Sorry, your browser doesn\'t support canvas. Please try another.</p>'+
									    '</canvas>'+
									'</div>'+
									'<img src="upload/spin-6.png" style="height: auto;width: 250px;margin-bottom: 20%; position: relative; transform: scale(1.5);">'+
								'</td>'+
							'</tr>'+
							'<tr>'+
								'<td align="center" valign="center">'+
						        	'<div class="margin-box_mobile">'+
									'<h4 style="color: white; margin-top: 27px;"><b>User ID</b></h4>'+
									        		'<input type="text" style="margin-bottom: 20px; z-index: 2; position: relative;" name="username" placeholder="User ID" autocomplete="off">'+
													'<h2 style="color: white; margin: 7px; font-size: 23px;"><b>Voucher</b></h2>'+
									        		'<input type="text" name="voucher" placeholder="Kode Tiket" autocomplete="off">'+
									        		'<div class="row">'+
									        			'<div class="col-md-12" style="margin-top: 20px;">'+
									        				'<button type="submit" name="start" disabled= "disabled" class="submit" onclick="startSpin()"><b>SPIN</b></button>'+
									        			'</div>'+
									        			'<div class="col-md-12" style="margin-top: 20px;">'+
									        				'<button type="submit" name="history" class="submit" onclick="getHistory()"><b>HISTORY</b></button>'+
									        			'</div>'+
									        		'</div>'+
									        		'<small id="error_message_voucher" class="text-warning form-label"></small>'+
						        	'</div>'+
						        '</td>'+
							'</tr>'+
						'</table>';
			$("body").prepend(v_mobile);
			setSpinner();
		}else{
			var v_desktop = '<img src="https://ypol.ngedemo.site/upload/wall-2.jpg" style="width: 100%; height: 100vh; position: fixed;"/>'+
							'<div class="row">'+
								'<div class="col-md-6" style="margin-top: 3%">'+
									'<div class="container_spinner">'+
									  	'<canvas class="inner" id="canvas" width="620" height="620">'+
							                '<p style="color: white" align="center">Sorry, your browser doesn\'t support canvas. Please try another.</p>'+
							            '</canvas>'+
									  	'<img class="inner" id="img-desktop" src="https://ypol.ngedemo.site/upload/spin-6.png">'+
									'</div>'+
								'</div>'+
								'<div class="col-md-6">'+
									'<table class="main">'+
										'<tr>'+
											'<td align="center" valign="center">'+
									        	'<div class="margin-box" style="margin-top: 10%;">'+
									        		'<img class="logo-web" src="https://ypol.ngedemo.site/upload/luckwheel.png" style="width: 100%;">'+
													'<h2 style="color: white; text-align: center;"><b>User ID</b></h2>'+
									        		'<input type="text" style="margin-bottom: 20px;" name="username" placeholder="USER ID" autocomplete="off">'+
													'<h2 style="color: white; text-align: center;"><b>Token</b></h2>'+
									        		'<input type="text" name="voucher" placeholder="Your Token" autocomplete="off">'+
													'<div class="row">'+
									        			'<div class="col-md-12" style="margin-top: 20px;">'+
									        				'<button type="submit" name="start" disabled= "disabled" class="submit" onclick="startSpin()"><b>SPIN</b></button>'+
									        			'</div>'+
									        		'</div>'+
									        		'<button style="margin-top: 20px;" type="submit" name="history" class="submit" onclick="getHistory()"><b>HISTORY</b></button>'+
									        		'<small id="error_message_voucher" class="text-warning form-label"></small>'+
									        	'</div>'+
									        '</td>'+
										'</tr>'+
									'</table>'+
								'</div>'+
							'</div>';

			$("body").prepend(v_desktop);
			setSpinner();
		}

		function visitPage(){
        window.location='';
    	}

		$(document).ready(function() {
			$('input[name="voucher"]').on('input', function() {
			var voucherInput = $(this).val();
			var startButton = $('[name="start"]');
        
			if (voucherInput.length === 0) {
				startButton.prop('disabled', true);
			} else {
				startButton.prop('disabled', false);
			}
    		});
		});



        function setSpinner(){
            theWheel = new Winwheel({


                'outerRadius'     : 235,        // Set outer radius so wheel fits inside the background.
                // 'innerRadius'     : 50,         // Make wheel hollow so segments don't go all way to center.
                'textFontSize'    : 24,         // Set default font size for the segments.
                'textOrientation' : 'curved', // Make text vertial so goes down from the outside of wheel.
                'textAlignment'   : 'outer',    // Align text to outside of wheel.
                'textFillStyle'   : 'black',
                'textMargin'      : 50,
                // 'drawText'        : true, 
				'textLineWidth'     : 3,
                'drawMode'        : 'segmentImage', 
                'numSegments'     : 8,         // Specify number of segments.
                'segments'        :                  
                [
																				{'image' : 'https://ypol.ngedemo.site/upload/91fd6372dcccf9f9c6b6b04aae29a1d6.png', 'fillStyle' : '#e5e5e5', 'textFillStyle' : 'black', 'text' : '5.888'},
									   					   																{'image' : 'https://ypol.ngedemo.site/upload/e01bbe2a612d964bf20c5e3bb98fed1b.png', 'fillStyle' : '#f2bd18' ,'text' : '24888'},
									   					   																{'image' : 'https://ypol.ngedemo.site/upload/d243356859cf12350137b6043b609e8b.png', 'fillStyle' : '#e5e5e5', 'textFillStyle' : 'black', 'text' : '15000'},
									   					   																{'image' : 'https://ypol.ngedemo.site/upload/caa03aae6a5cb6acd93419662d81a150.png', 'fillStyle' : '#f2bd18' ,'text' : 'EMAS'},
									   					   																{'image' : 'https://ypol.ngedemo.site/upload/1d4f5c6ee270f0b6aad18a2e8c82b6b1.png', 'fillStyle' : '#e5e5e5', 'textFillStyle' : 'black', 'text' : '58888'},
									   					   																{'image' : 'https://ypol.ngedemo.site/upload/a3c8d8266835f2dbc50f4961f91d3ac7.png', 'fillStyle' : '#f2bd18' ,'text' : '588888'},
									   					   																{'image' : 'https://ypol.ngedemo.site/upload/5743e583a9eddec89d09b7270d6ef6af.png', 'fillStyle' : '#e5e5e5', 'textFillStyle' : 'black', 'text' : '128888'},
									   					   																{'image' : 'https://ypol.ngedemo.site/upload/2ca4d81bd79f2ef29eccda1cff17ea93.png', 'fillStyle' : '#FF0000' ,'text' : 'IPHONE13'},
									   					   	
                ],
                'animation' :    
                {
                    'type'     : 'spinToStop',
                    'duration' : 8, 
                    'spins'    : 2, 
                    'callbackSound' : playSound, 
                    'callbackFinished' : dialodWinner
                }
            });
        }

		function update(){
        	var voucher_val = $("input[name=voucher]").val();
					if (voucher_val.length <= 0){
					Swal.fire({
					icon: 'error',
					title: 'Oops...',
					text: 'Vourcher Code Is Empty!'
					})
        		// $("#error_message_voucher").html("Voucher Code Its Empty!");
        		return;
        	}
	        $.ajax({
	            url: 'main/confirm/'+voucher_val,
	            type: 'get',
	            contentType: 'application/json',
	        });
        }

		function checkusername(){
        	var username = $("input[name=username]").val();
					if (username.length <= 0){
					Swal.fire({
					icon: 'error',
					title: 'Oops...',
					text: 'Username Is Empty!'
					})
        		// $("#error_message_voucher").html("Voucher Code Its Empty!");
        		return;
        	}

        	$("button[name=voucher]").attr('disabled','disabled');
        	$("button[name=history]").attr('disabled','disabled');
	        $("#error_message_voucher").html('Checking voucher code...');
	        $.ajax({
	            // url: 'check.php?'+username,
	            url: 'main/check_session/'+username,
	            type: 'get',
	            contentType: 'application/json',
	            success: function( data, textStatus, jQxhr ){
				    var data = JSON.parse(data);
				    $("#error_message_voucher").html(data['message']);
				    if (data['code'] == 200) {
						// $(data).load('main/confirm/'+voucher_val);
						// window.location("");
						window.location='index.html';
				    }else{
						Swal.fire({
						icon: 'warning',
						title: 'Oops...',
						text: 'Username is Not Registered!'
						})
						// $("#error_message_voucher").html('Voucher is Invalid or Expired!');
				    	$("button[name=start]").removeAttr('disabled');
				    	$("button[name=history]").removeAttr('disabled');
				    }
				},
				error: function( jqXhr, textStatus, errorThrown ){
				    console.log(errorThrown);
				}
	        });
        }

        function startSpin(){
        	var voucher_val = $("input[name=voucher]").val();
			var username_val = $("input[name=username]").val();
					if (username_val.length <= 0 || voucher_val.length <= 0){
					Swal.fire({
					icon: 'error',
					title: 'Oops...',
					text: 'User ID / Vourcher Code Is Empty!'
					})
        		// $("#error_message_voucher").html("Voucher Code Its Empty!");
        		return;
        	}

        	$("button[name=start]").attr('disabled','disabled');
        	$("button[name=history]").attr('disabled','disabled');
	        // $("#error_message_voucher").html('Checking voucher code...');
	        $.ajax({
	            // url: 'check.php?'+voucher_val,
	            url: 'main/check?username='+username_val+'&voucher='+voucher_val,
	            type: 'get',
	            contentType: 'application/json',
	            success: function( data, textStatus, jQxhr ){
				    var data = JSON.parse(data);
				    $("#error_message_voucher").html(data['message']);
				    if (data['code'] == 200) {
				    	data_winner = data;
				    	setTimeout(function(){
					    	theWheel.stopAnimation(false); 
			                theWheel.rotationAngle = 2; 
			                theWheel.draw();  

			                theWheel.animation.spins = 5;
			                let segmentNumber = data['id_order'];
 
							if (segmentNumber) {
								let stopAt = theWheel.getRandomForSegment(segmentNumber);
								theWheel.animation.stopAngle = stopAt;
								theWheel.startAnimation();
							}
					    }, 200);
						$(data).load('main/confirm?username='+username_val+'&voucher='+voucher_val);
				    }else{
						Swal.fire({
						icon: 'warning',
						title: 'Oops...',
						text: 'User ID / Voucher is Invalid'
						})
						// $("#error_message_voucher").html('Voucher is Invalid or Expired!');
				    	$("button[name=start]").removeAttr('disabled');
				    	$("button[name=history]").removeAttr('disabled');
				    }
				},
				error: function( jqXhr, textStatus, errorThrown ){
				    console.log(errorThrown);
				}
	        });
        }

        function dialodWinner(indicatedSegment){
            if (data_winner != null) {
            	audio.src ="public/main/audio/congrats.mp3";
            	audio.loop = false;
            	audio.play();
            	
            	$("#item-image").attr("src", data_winner['item_image']);
	            $("#item-value").html(data_winner['item_value']);
	            $("#item-prize").html(data_winner['item_value']);
	            $("#item-name").html(data_winner['item_name']);
	            $("#voucher-username").html(data_winner['username']);
	            $("#voucher-code").html(data_winner['voucher']);
	            $("#item-description").html(data_winner['item_description']);


				claim_message = claim_message.replaceAll('{{username}}', data_winner['username']);
				claim_message = claim_message.replaceAll('{{voucher}}', data_winner['voucher']);
				claim_message = claim_message.replaceAll('{{item_name}}', data_winner['item_name']);
				claim_message = claim_message.replaceAll('{{item_value}}', data_winner['item_value']);

				var link_claim = "https://wa.me/#?text="+claim_message;
				$("#link_claim").attr('href', link_claim);

	            var confettiElement = document.getElementById('my-canvas');
				var confettiSettings = { target: confettiElement };
				var confetti = new ConfettiGenerator(confettiSettings);
				confetti.render();
			    
			    $("#my-canvas").css("display", "block");
	            $("#popup-container-win").fadeIn(1000);
            }else{
            	// audio.src ="https://ypol.ngedemo.site/public/main/audio/musik.mp3";
            	// audio.play();
            }
        }

        function getHistory(){
        	$("#error_message_voucher").html("Mohon Tunggu...");

        	$("button[name=history]").attr('disabled','disabled');
	        $.ajax({
	            url: 'main/history',
	            type: 'get',
	            contentType: 'application/json',
	            success: function( data, textStatus, jQxhr ){
				    var data = JSON.parse(data);
				    $("#error_message_voucher").html("");
				    $("#history-container").html("");

				    var str = '';
				    for (var i = 0; i < data.length; i++) {
				    	str += '<tr>'+
	                    			'<td style="width: 10%; padding: 5px; text-align: center;">'+data[i]['no']+'</td>'+
		                    		'<td style="width: 50%; padding: 5px;">'+data[i]['username']+'</td>'+
		                    		'<td style="width: 40%; padding: 5px; text-align: center;">'+data[i]['value']+'</td>'+
		                    	'</tr>';
				    }

				    $("#history-container").html(str);
				    $("#popup-container-history").fadeIn(1000);
				},
				error: function( jqXhr, textStatus, errorThrown ){
				    console.log(errorThrown);
				}
	        });
        }

        function playSound() {
            audio.pause();
            audio.currentTime = 0;

            audio.src ="public/main/audio/spin.mp3";
            audio.loop = false;
            audio.play();
        }

        function visitPage() {
        	data_winner = null;
        	audio.src ="public/main/audio/musik.mp3";
        	audio.loop = true;
        	audio.play();

        	$("#error_message_voucher").html("");
        	$("input[name=voucher]").val("");
        	$("button[name=start]").removeAttr('disabled');
			$("button[name=history]").removeAttr('disabled');
		    $("#popup-container-win").fadeOut(500);
		    $("#my-canvas").css("display", "none");

		    theWheel.animation.spins = 2;
            theWheel.animation.stopAngle = 10;

            theWheel.startAnimation();
		}

		function close_popup_history() {
        	$("button[name=start]").removeAttr('disabled');
			$("button[name=history]").removeAttr('disabled');
		    $("#popup-container-history").fadeOut(500);
		}

		function close_popup_start() {
		    $("#popup-container-ads").fadeOut(500);

			audio.pause();
            audio.currentTime = 0;

            audio.src ="public/main/audio/spin.mp3";
            audio.loop = true;
            audio.play();

		    theWheel.animation.spins = 2;
            theWheel.animation.stopAngle = 10;

            theWheel.startAnimation();
		}

        var music = document.createElement("AUDIO")
        document.body.appendChild(music);

                	document.oncontextmenu = function (e) {e.preventDefault(); return false;}
            document.onkeydown = function (e) {
                if (event.keyCode == 123) {return false;}
                if (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) {return false;}
                if (e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) {return false; }
                if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) {return false; }
                if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) {return false;}
            }
            </script>

			<script src="http://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
			<script src="public/main/js/spin.js"></script>
</body>

</html>